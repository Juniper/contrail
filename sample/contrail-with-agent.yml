database:
  type: mysql
  dialect: mysql
  host: localhost
  user: root
  password: contrail123
  name: contrail_test
  max_open_conn: 100
  connection_retries: 10
  retry_period: 3s

etcd:
  endpoints:
  - localhost:2379
  username: ""
  password: ""
  path: contrail

log_level: debug

server:
  enabled: true
  read_timeout: 10
  write_timeout: 5
  log_api: true
  address: ":9091"
  tls:
    enabled: true
    key_file: /root/go/src/github.com/Juniper/contrail/tools/server.key
    cert_file: /root/go/src/github.com/Juniper/contrail/tools/server.crt
  enable_grpc: false
  static_files:
    /: /root/go/src/github.com/Juniper/contrail/public
  notify_etcd: false

keystone:
  local: true # Enable local keystone v3. This is only for testing now.
  assignment:
    type: static
    data:
      domains:
        default: &default
          id: default
          name: default
      projects:
        admin: &admin
          id: admin
          name: admin
          domain: *default
        demo: &demo
          id: demo
          name: demo
          domain: *default
      users:
        alice:
          id: alice
          name: Alice
          domain: *default
          password: alice_password
          email: alice@juniper.nets
          roles:
          - id: admin
            name: admin
            project: *admin
        bob:
          id: bob
          name: Bob
          domain: *default
          password: bob_password
          email: bob@juniper.net
          roles:
          - id: Member
            name: Member
            project: *demo
  store:
    type: memory
    expire: 3600
  insecure: true
  auth_url: https://localhost:9091/keystone/v3
  authurl: https://localhost:9091/keystone/v3

no_auth: false
insecure: true
domain_id: default

watcher:
  enabled: false
  storage: json

client:
  id: alice
  password: alice_password
  project_id: admin
  domain_id: default
  schema_root: /
  endpoint: https://localhost:9091

agent:
  enabled: true
  backend: file
  watcher: polling
  schema_root: /
  log_level: debug
  tasks:
  - schema_id: contrail_cluster
    common:
    - vars:
        src_dir: "pkg/cluster/configs"
        dir: "/var/tmp/{{ resource.schema_id }}/config/{{ resource.uuid }}"
    on_create:
    - debug: "AGENT creating {{ dir }}"
    - command: mkdir -p "{{ dir }}"
    - debug: "AGENT created {{ dir }}"
    - template:
        src: "{{ src_dir }}/contrail-cluster-config.tmpl"
        dest: "{{ dir }}/contrail-cluster-config.yml"
    - debug: "AGENT creating cluster(contrail cluster -c {{ dir }}/contrail-cluster-config.yml)"
    - command: "contrail cluster -c {{ dir }}/contrail-cluster-config.yml"
    - debug: "AGENT cluster create complete"
    on_update:
    - template:
        src: "{{ src_dir }}/contrail-cluster-config.tmpl"
        dest: "{{ dir }}/contrail-cluster-config.yml"
    - debug: "AGENT updating cluster(contrail cluster -c {{ dir }}/contrail-cluster-config.yml)"
    - command: "contrail cluster -c {{ dir }}/contrail-cluster-config.yml"
    - debug: "AGENT cluster update complete"
    on_delete:
    - template:
        src: "{{ src_dir }}/contrail-cluster-config.tmpl"
        dest: "{{ dir }}/contrail-cluster-config.yml"
    - debug: "AGENT deleting cluster(contrail cluster -c {{ dir }}/contrail-cluster-config.yml)"
    - command: "contrail cluster -c {{ dir }}/contrail-cluster-config.yml"
    - debug: "AGENT deleting {{ dir }}"
    - command: "rm -rf  {{ dir }}"
    - debug: "AGENT deleted {{ dir }}"

compilation:
  enabled: false
  plugin_directory: 'etc/plugins/'
  number_of_workers: 4
  max_job_queue_len: 5
  msg_queue_lock_time: 30
  msg_index_string: 'MsgIndex'
  read_lock_string: "MsgReadLock"
  master_election: true
  plugin:
    handlers:
      create_handler: 'HandleCreate'
      update_handler: 'HandleUpdate'
      delete_handler: 'HandleDelete'

cache:
  enabled: false
  timeout: 10s
  max_history: 100000
  cassandra:
    enabled: false
  etcd:
    enabled: false

replication:
  cassandra:
    enabled: false
  amqp:
    enabled: false

cassandra:
  host: localhost
  port: 9042
  timeout: 3600s
  connect_timeout: 600ms

amqp:
  url: amqp://guest:guest@localhost:5672/
