{
  "comments": [
    {
      "key": {
        "uuid": "2ceabcb7_02a6204f",
        "filename": "pkg/apisrv/proxy.go",
        "patchSetId": 11
      },
      "lineNbr": 156,
      "author": {
        "id": 565
      },
      "writtenOn": "2019-11-14T10:58:00Z",
      "side": 1,
      "message": "This config string is to long. How about service_token_endpoints",
      "range": {
        "startLine": 156,
        "startChar": 49,
        "endLine": 156,
        "endChar": 101
      },
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "827a9cd5_d53ace06",
        "filename": "pkg/apisrv/proxy.go",
        "patchSetId": 11
      },
      "lineNbr": 176,
      "author": {
        "id": 618
      },
      "writtenOn": "2019-11-13T15:38:09Z",
      "side": 1,
      "message": "Would skipping adding X-Service-Token to the request if the cluster has BasicAuth be useful?\nI don\u0027t think a cluster without Keystone would have a an endpoint configured to have X-Service-Token added to requests sent to it.",
      "range": {
        "startLine": 175,
        "startChar": 1,
        "endLine": 176,
        "endChar": 94
      },
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "23c72f95_0b5eaa9b",
        "filename": "pkg/apisrv/proxy.go",
        "patchSetId": 11
      },
      "lineNbr": 176,
      "author": {
        "id": 618
      },
      "writtenOn": "2019-11-14T16:38:35Z",
      "side": 1,
      "message": "As discussed with Michal offline, there shouldn\u0027t be any clusters with a swift endpoint AND non-keystone authentication, so no change is necessary here.",
      "parentUuid": "827a9cd5_d53ace06",
      "range": {
        "startLine": 175,
        "startChar": 1,
        "endLine": 176,
        "endChar": 94
      },
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "98a97c5a_ab6fa5bb",
        "filename": "pkg/apisrv/proxy_test.go",
        "patchSetId": 11
      },
      "lineNbr": 216,
      "author": {
        "id": 565
      },
      "writtenOn": "2019-11-14T10:58:00Z",
      "side": 1,
      "message": "Optional: IMO defined assertions in mocks are really hard to read. They break the test flow (Arrange-Act-Assert) and it requires more focus to remember that the assertion is planned at the beginning. How about hijacking the request here and moving the assertion to the end of the test? The request could be stored as a closure.",
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d4ee7d0_77f720f5",
        "filename": "pkg/apisrv/proxy_test.go",
        "patchSetId": 11
      },
      "lineNbr": 216,
      "author": {
        "id": 618
      },
      "writtenOn": "2019-11-14T14:15:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "98a97c5a_ab6fa5bb",
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7840fd3_16fa1b57",
        "filename": "pkg/apisrv/proxy_test.go",
        "patchSetId": 11
      },
      "lineNbr": 237,
      "author": {
        "id": 618
      },
      "writtenOn": "2019-11-13T15:38:09Z",
      "side": 1,
      "message": "Would using a different fake keystone server for the publicURL be useful?",
      "range": {
        "startLine": 236,
        "startChar": 2,
        "endLine": 237,
        "endChar": 33
      },
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58281d7f_e089ace1",
        "filename": "pkg/apisrv/proxy_test.go",
        "patchSetId": 11
      },
      "lineNbr": 237,
      "author": {
        "id": 618
      },
      "writtenOn": "2019-11-14T14:15:31Z",
      "side": 1,
      "message": "The difference between private and public endpoints is not related to this test, so I\u0027ll keep it as is.",
      "parentUuid": "e7840fd3_16fa1b57",
      "range": {
        "startLine": 236,
        "startChar": 2,
        "endLine": 237,
        "endChar": 33
      },
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0effd479_4049b980",
        "filename": "sample/test_config.yml",
        "patchSetId": 11
      },
      "lineNbr": 49,
      "author": {
        "id": 618
      },
      "writtenOn": "2019-11-13T15:38:09Z",
      "side": 1,
      "message": "What would be a better name for this option?",
      "range": {
        "startLine": 48,
        "startChar": 2,
        "endLine": 49,
        "endChar": 54
      },
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ce8cdf81_8d7b0455",
        "filename": "sample/test_config.yml",
        "patchSetId": 11
      },
      "lineNbr": 49,
      "author": {
        "id": 565
      },
      "writtenOn": "2019-11-14T10:58:00Z",
      "side": 1,
      "message": "service_token_endpoints",
      "parentUuid": "0effd479_4049b980",
      "range": {
        "startLine": 48,
        "startChar": 2,
        "endLine": 49,
        "endChar": 54
      },
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bcff6f3c_c9ebbf52",
        "filename": "sample/test_config.yml",
        "patchSetId": 11
      },
      "lineNbr": 49,
      "author": {
        "id": 618
      },
      "writtenOn": "2019-11-14T14:15:31Z",
      "side": 1,
      "message": "Changed to dynamic_proxy_service_token_endpoints.",
      "parentUuid": "ce8cdf81_8d7b0455",
      "range": {
        "startLine": 48,
        "startChar": 2,
        "endLine": 49,
        "endChar": 54
      },
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b90b6bee_e38e339b",
        "filename": "sample/test_config.yml",
        "patchSetId": 11
      },
      "lineNbr": 49,
      "author": {
        "id": 565
      },
      "writtenOn": "2019-11-14T15:07:15Z",
      "side": 1,
      "message": "If you want to have a common suffix then introduce the subobject like dynamic_proxy (or proxy, I think dynamic is implicit here because we have no other proxy). That way we could keep the yaml keys shorter at least.",
      "parentUuid": "bcff6f3c_c9ebbf52",
      "range": {
        "startLine": 48,
        "startChar": 2,
        "endLine": 49,
        "endChar": 54
      },
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bab9d2e6_85289058",
        "filename": "sample/test_config.yml",
        "patchSetId": 11
      },
      "lineNbr": 115,
      "author": {
        "id": 618
      },
      "writtenOn": "2019-11-13T15:38:09Z",
      "side": 1,
      "message": "Service users are usually created with a project_id of \"service\". Do we need to request the token with the same project_id?",
      "range": {
        "startLine": 114,
        "startChar": 4,
        "endLine": 115,
        "endChar": 21
      },
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0406c3bc_698d039b",
        "filename": "sample/test_config.yml",
        "patchSetId": 11
      },
      "lineNbr": 115,
      "author": {
        "id": 565
      },
      "writtenOn": "2019-11-14T10:58:00Z",
      "side": 1,
      "message": "Service users must be created in service project to be a service user. Additionally they are not linked to admin project, so this config is invalid. Was this tested with real openstack?",
      "parentUuid": "bab9d2e6_85289058",
      "range": {
        "startLine": 114,
        "startChar": 4,
        "endLine": 115,
        "endChar": 21
      },
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e7f2f4ac_2952c129",
        "filename": "sample/test_config.yml",
        "patchSetId": 11
      },
      "lineNbr": 115,
      "author": {
        "id": 618
      },
      "writtenOn": "2019-11-14T14:15:31Z",
      "side": 1,
      "message": "I see that https://docs.openstack.org/glance/train/admin/authentication.html#configuring-glance-api-to-use-keystone uses `service_admins`, so I\u0027ve changed this to `service`.\n\nAs discussed offline, this should be tested with a real openstack right after the change is merged.",
      "parentUuid": "0406c3bc_698d039b",
      "range": {
        "startLine": 114,
        "startChar": 4,
        "endLine": 115,
        "endChar": 21
      },
      "revId": "81efdbba45d5176a654ee39e057a00124a84dac4",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    }
  ]
}