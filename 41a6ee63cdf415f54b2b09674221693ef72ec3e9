{
  "comments": [
    {
      "key": {
        "uuid": "f76498cd_1e05ec06",
        "filename": "pkg/apisrv/baseapisrv/discovery.go",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:47:47Z",
      "side": 1,
      "message": "+1, for the name change",
      "revId": "41a6ee63cdf415f54b2b09674221693ef72ec3e9",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c030e117_239d450d",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 5
      },
      "lineNbr": 443,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:47:47Z",
      "side": 1,
      "message": "This again leaks implementation details from the `BaseServer` - the endpoint registration should be transparent for the `BaseServer` user.",
      "revId": "41a6ee63cdf415f54b2b09674221693ef72ec3e9",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "188045b1_1dc1a713",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 5
      },
      "lineNbr": 443,
      "author": {
        "id": 558
      },
      "writtenOn": "2020-01-08T13:45:52Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "c030e117_239d450d",
      "revId": "41a6ee63cdf415f54b2b09674221693ef72ec3e9",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "08423c63_34472bb8",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 5
      },
      "lineNbr": 443,
      "author": {
        "id": 618
      },
      "writtenOn": "2020-01-10T12:53:34Z",
      "side": 1,
      "message": "I\u0027ve hidden this method behind the baseapisrv.HTTPRouter interface and also moved this code to pkg/services.\n\nHowever, I suppose you mean that baseapisrv.Server\u0027s user should not need to register parts of the homepage explicitly and that it should be done as part of the normal GET(), POST(), Group(), etc. interface.\n\nIt seems that the homepage only makes sense for ContrailService as it is now, so, to do the above, we would need to think of how to represent the other endpoints in VNC API\u0027s framework of descriptions. See the research I\u0027ve done below:\n\n* How is this used?\n** r.Register(path, method, name, rel) \n*** // Register adds a new link to the HomepageHandler.\n*** Used only in (*ContrailService).RegisterHTTPAPI()\n*** _path_ and _method_ can be taken from a normal call, e.g. r.GET(path, handler)\n**** although an empty _method_ is used for Contrail CRUD endpoints right now.\n*** _rel_ can be \"action\", \"resource-base\", or \"collection\".\n**** vnc_cfg_api_server.py also has \"root\" and \"documentation\"\n* What endpoints aren\u0027t added to the homepage right now?\n** dynamic proxy\n** static proxy\n** watch API\n** local keystone API\n** neutron plugin API\n** sync (bulk create/update) API\n** UploadCloudKeys\n* What values of _rel_ to use for the above endpoints?",
      "parentUuid": "188045b1_1dc1a713",
      "revId": "41a6ee63cdf415f54b2b09674221693ef72ec3e9",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d8b352d3_6ac00589",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 5
      },
      "lineNbr": 443,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-14T11:52:17Z",
      "side": 1,
      "message": "You can place whatever makes sense for you as long as the subset of original values are preserved, because there is no known user of homepage today. You can even add your own values and fields - it won\u0027t break anything. \n\nPlease hide the registration in other methods.",
      "parentUuid": "08423c63_34472bb8",
      "revId": "41a6ee63cdf415f54b2b09674221693ef72ec3e9",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5b43d15a_da62c227",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 5
      },
      "lineNbr": 443,
      "author": {
        "id": 618
      },
      "writtenOn": "2020-01-14T12:22:55Z",
      "side": 1,
      "message": "\u003e there is no known user of homepage today.\n\nIn that case, are we sure there are going to be any users of it in the future? This (having a generic instead of a Contrail-only homepage) might not be worth adding extra arguments to all the methods in the interface.\n\n\u003e Please hide the registration in other methods.\n\nWhat do you mean by this?",
      "parentUuid": "d8b352d3_6ac00589",
      "revId": "41a6ee63cdf415f54b2b09674221693ef72ec3e9",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a4fa318_a5a57039",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 5
      },
      "lineNbr": 443,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-14T12:39:10Z",
      "side": 1,
      "message": "I mean that we should call Register every time we call Put, Post, Get, etc. As you\u0027ve mentioned you can easily fill path and method. Then name can fallback to path and rel can fallback to action. For custom cases where you need to set custom rel or action, you can introduce functional options into those methods.",
      "parentUuid": "5b43d15a_da62c227",
      "revId": "41a6ee63cdf415f54b2b09674221693ef72ec3e9",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    }
  ]
}