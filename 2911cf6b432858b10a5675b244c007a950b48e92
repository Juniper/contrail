{
  "comments": [
    {
      "key": {
        "uuid": "9d3418b2_beac22a2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:33:15Z",
      "side": 1,
      "message": "Why are we extracting? Is this some sort of iterative approach? IMO we should transform whole apisrv package into a generic one, we shouldn\u0027t keep the contrail/pkg/apisrv to avoid confusion.\n\ntl;dr I think we should admit that it is a temporary solution or implement this in this CR.",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c4a149da_da912719",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 618
      },
      "writtenOn": "2020-01-07T12:02:00Z",
      "side": 1,
      "message": "My understanding is that the goal is to have asf/pkg/apisrv not depend on the generated services, and the endpoints (including the API endpoints) to be added to it via plugins. This means the DB and the service chain might as well be outside it too. So the only thing that remains is the HTTP and GRPC server.\nThe plan we have includes moving all of the other parts outside and plugging them in in pkg/cmd/contrail. But pkg/testutil/integration also uses apisrv.Server, so we would have to either duplicate all the code that creates the DB/services/endpoints (and connects them together) or make a new object/function to do that. And contrail/pkg/apisrv already does this.\n\nSo just extracting the HTTP and GRPC server part to asf/pkg/apisrv seems to be a simpler way to meet the goal.",
      "parentUuid": "9d3418b2_beac22a2",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ef020e1d_2dd30a83",
        "filename": "/COMMIT_MSG",
        "patchSetId": 4
      },
      "lineNbr": 10,
      "author": {
        "id": 558
      },
      "writtenOn": "2020-01-08T12:45:25Z",
      "side": 1,
      "message": "I like Witaut\u0027s solution, but I think that pkg/baseapisrv code should be placed in asf/pkg/apisrv int this CR. It would avoid hassle with synchronizing code to ASF. What do you think?",
      "parentUuid": "c4a149da_da912719",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aec7dd56_8f2fc96a",
        "filename": "pkg/apisrv/baseapisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "Name clutter - base is redundant in this context.",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f3b8e143_9ac3f6cf",
        "filename": "pkg/apisrv/baseapisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 618
      },
      "writtenOn": "2020-01-07T15:15:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aec7dd56_8f2fc96a",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "89ad773d_cbaefd9d",
        "filename": "pkg/apisrv/baseapisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 558
      },
      "writtenOn": "2020-01-08T12:45:25Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f3b8e143_9ac3f6cf",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "50232fba_2c176bc5",
        "filename": "pkg/apisrv/baseapisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 37,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "What is the point of init function? Please follow RAII and move this to NewBaseServer.",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b45b01ab_ea868aa4",
        "filename": "pkg/apisrv/baseapisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 37,
      "author": {
        "id": 558
      },
      "writtenOn": "2020-01-08T12:45:25Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "50232fba_2c176bc5",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a384d4c9_d42afa8e",
        "filename": "pkg/apisrv/baseapisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 169,
      "author": {
        "id": 558
      },
      "writtenOn": "2020-01-08T12:45:25Z",
      "side": 1,
      "message": "Could you place this and recorderTask in middleware.go?",
      "range": {
        "startLine": 138,
        "startChar": 2,
        "endLine": 169,
        "endChar": 4
      },
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "684b3e07_7995651b",
        "filename": "pkg/apisrv/homepage_test.go",
        "patchSetId": 4
      },
      "lineNbr": 125,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "Please mark as TODO - we definitely shouldn\u0027t access Echo which is an implementation detail.",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "78044acb_df7152cd",
        "filename": "pkg/apisrv/homepage_test.go",
        "patchSetId": 4
      },
      "lineNbr": 125,
      "author": {
        "id": 558
      },
      "writtenOn": "2020-01-08T12:45:25Z",
      "side": 1,
      "message": "I think that Echo field should be unexported. A TODO there would be better.",
      "parentUuid": "684b3e07_7995651b",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2b2f7a44_a390663d",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 126,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "Please mark as TODO - we definitely shouldn\u0027t access Echo which is an implementation detail.",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e89ba61b_c6aebb55",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 126,
      "author": {
        "id": 558
      },
      "writtenOn": "2020-01-08T12:45:25Z",
      "side": 1,
      "message": "I think that Echo field should be unexported. A TODO there would be better.",
      "parentUuid": "2b2f7a44_a390663d",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "14e0dc21_17e46de9",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 131,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "Ditto L126",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "69cc63d2_b57be8b6",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 156,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "This shouldn\u0027t be leaked too - the service should know how to register it\u0027s grpc endpoints and such method should be called by the base server if grpc is enabled. Fix this or mark as todo.",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6fa836be_d7c89908",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 156,
      "author": {
        "id": 558
      },
      "writtenOn": "2020-01-08T12:45:25Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "69cc63d2_b57be8b6",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3dfabbc_c3cd9016",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 286,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "Ditto L126",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "67223df6_87739897",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 324,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "Ditto L126",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1319c75_bcfc4c52",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 333,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "Ditto L126",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "dba6832b_7e328ad1",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 409,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "Ditto L126",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6f3df006_c2e1ec22",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 416,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "Ditto L126",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a53ae410_81fc1b3f",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 4
      },
      "lineNbr": 420,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "Ditto L126",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "046fd4b8_9842f6b8",
        "filename": "pkg/testutil/integration/api_server.go",
        "patchSetId": 4
      },
      "lineNbr": 95,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:30:32Z",
      "side": 1,
      "message": "This looks suspicious. Please mark as todo, since we shouldn\u0027t expose Echo.",
      "revId": "2911cf6b432858b10a5675b244c007a950b48e92",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    }
  ]
}