{
  "comments": [
    {
      "key": {
        "uuid": "1f20e9cf_2b30c435",
        "filename": "pkg/apisrv/baseapisrv/server.go",
        "patchSetId": 8
      },
      "lineNbr": 42,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:45:21Z",
      "side": 1,
      "message": "IMO this exposes quite a lot and makes the client package heavily coupled with BaseServer implementation details. I think that here should be an interface with simple methods like:\n\n type Router interface {\n  RegisterHTTP(path, method string, ... whatever is necessary)\n  RegisterGRPC(router GRPCRouter)\n }\n\nwhere GRPCRouter is:\n\n type GRPCRouter interface {\n  RegisterService(sd *grpc.ServiceDesc, ss interface{})\n }",
      "range": {
        "startLine": 42,
        "startChar": 20,
        "endLine": 42,
        "endChar": 31
      },
      "revId": "a1cc7f3bdbb68ce093ef7b19c698132618db9417",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "779df819_4b772790",
        "filename": "pkg/apisrv/baseapisrv/server.go",
        "patchSetId": 8
      },
      "lineNbr": 42,
      "author": {
        "id": 558
      },
      "writtenOn": "2020-01-08T13:38:27Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "1f20e9cf_2b30c435",
      "range": {
        "startLine": 42,
        "startChar": 20,
        "endLine": 42,
        "endChar": 31
      },
      "revId": "a1cc7f3bdbb68ce093ef7b19c698132618db9417",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37452bf2_7b324320",
        "filename": "pkg/apisrv/baseapisrv/server.go",
        "patchSetId": 8
      },
      "lineNbr": 42,
      "author": {
        "id": 618
      },
      "writtenOn": "2020-01-09T11:54:01Z",
      "side": 1,
      "message": "I\u0027ve replaced *BaseServer with a Router interface. Next, I\u0027ll split the func(Router) error into an interface with methods for HTTP and GRPC, so that the GRPCEnabled() method can be removed.",
      "parentUuid": "779df819_4b772790",
      "range": {
        "startLine": 42,
        "startChar": 20,
        "endLine": 42,
        "endChar": 31
      },
      "revId": "a1cc7f3bdbb68ce093ef7b19c698132618db9417",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15420c61_11f5abfe",
        "filename": "pkg/apisrv/baseapisrv/server.go",
        "patchSetId": 8
      },
      "lineNbr": 42,
      "author": {
        "id": 618
      },
      "writtenOn": "2020-01-09T19:51:27Z",
      "side": 1,
      "message": "Done.\n\nAlso, partially resolved https://review.opencontrail.org/c/Juniper/contrail/+/55941/14/pkg/apisrv/baseapisrv/server.go#34. Still, baseapisrv.HandlerFunc uses echo.Context, and many users of it also use it, and changing that would be a large change. I\u0027ve added a TODO for this.",
      "parentUuid": "37452bf2_7b324320",
      "range": {
        "startLine": 42,
        "startChar": 20,
        "endLine": 42,
        "endChar": 31
      },
      "revId": "a1cc7f3bdbb68ce093ef7b19c698132618db9417",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f7758ad2_695d2eec",
        "filename": "pkg/apisrv/baseapisrv/server.go",
        "patchSetId": 8
      },
      "lineNbr": 42,
      "author": {
        "id": 558
      },
      "writtenOn": "2020-01-17T12:04:35Z",
      "side": 1,
      "message": "I am resolving this as interfaces look awesome.",
      "parentUuid": "15420c61_11f5abfe",
      "range": {
        "startLine": 42,
        "startChar": 20,
        "endLine": 42,
        "endChar": 31
      },
      "revId": "a1cc7f3bdbb68ce093ef7b19c698132618db9417",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d335be6e_e76c166a",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 565
      },
      "writtenOn": "2020-01-07T10:45:21Z",
      "side": 1,
      "message": "All those inline funcs should be defined on the services as methods and then service would implement some kind of Plugin interface. This would move registration code out of the apisrv - the service knows how to register itself.",
      "revId": "a1cc7f3bdbb68ce093ef7b19c698132618db9417",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e2423485_99c4ef5a",
        "filename": "pkg/apisrv/server.go",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 618
      },
      "writtenOn": "2020-01-09T19:51:27Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d335be6e_e76c166a",
      "revId": "a1cc7f3bdbb68ce093ef7b19c698132618db9417",
      "serverId": "c72cd27d-1743-4a55-84a4-cd13b8400c52",
      "unresolved": false
    }
  ]
}