name: dynamic project creation test
cleanup:
- path: /project/aa907485-e1f9-4a14-834d-8c69ed9cb3b2
test_data:

clients:
  default:
    id: alice
    password: alice_password
    insecure: true
    scope:
      project:
        name: admin

workflow:
- name: get a project that exists in Keystone
  request:
    path: /project/aa907485-e1f9-4a14-834d-8c69ed9cb3b2
    method: GET
    expected:
    - 200

- name: try to get a project that doesn't exist in Keystone
  request:
    path: /project/5a5ac531-e8cf-42cb-a90b-72abe349dd09
    method: GET
    expected:
    - 404

- name: get a project that exists in Keystone - ensure admin project exists
  request:
    path: /project/admin
    method: GET
    expected:
    - 200
  expect:
    project:
      fq_name:
      - default-domain
      - admin

- name: check that the default security group has been created
  request:
    path: /fqname-to-id
    method: POST
    data:
      fq_name:
      - default-domain
      - admin
      - default
      type: security-group
    expected:
    - 200

# TODO Check the security group's contents (using List with FQName)

- name: delete neutron project
  request:
    path: /project/aa907485-e1f9-4a14-834d-8c69ed9cb3b2
    method: DELETE
    expected:
    - 200

# TODO Check the security group is deleted
